---
cssclasses:
  - my_style_width_100
---
네임드 락은 `GET_LOCK` 함수를 이용해 임의 문자열에 대해 잠금을 설정할 수 있습니다. 
네임드 락은 단순히 사용자가 지정한 문자열에 대해 획득하고 반납하는 잠금입니다.
자주 사용되지 않습니다.


### 사용예시

데이터베이스 서버 1대에 5대의 웹 서버가 접속해서 서비스하는 상황에서 5대의 웹 서버가 어떤 정보를 동기화해야 하는 요건처럼 여러 클라이언트가 상호 동기화를 처리해야 할 때 네임드락을 이용하면 쉽게 해결할 수 있다.
```mysql
# mylock이라는 문자열에 대해 잠금을 획득한다.
# 이미 잠금을 사용 중인 경우 2초 동안 대기합니다.
mysql> select get_lock('mylock', 2);
+-----------------------+
| get_lock('mylock', 2) |
+-----------------------+
|                     1 |
+-----------------------+
1 row in set (0.00 sec)

# mylock이라는 문자열에 대해 잠금이 설정돼 있는지 확인한다.
mysql> select is_free_lock('mylock');
+------------------------+
| is_free_lock('mylock') |
+------------------------+
|                      0 |
+------------------------+
1 row in set (0.00 sec)

# mylock 이라는 문자열에 대해 획득했던 잠금을 반환한다
mysql> select release_lock('mylock');
+------------------------+
| release_lock('mylock') |
+------------------------+
|                      1 |
+------------------------+
1 row in set (0.00 sec)
```

네임드 락의 경우 많은 레코드에 대해서 복잡한 요건으로 레코드를 변경하는 트랜잭션에 유용하게 사용할 수 있습니다. 
배치 애플리케이션처럼 한꺼번에 많은 레코드를 변경하는 쿼리는 자주 데드락의 원인이 되곤 하는데 각 프로그램의 실행 시간을 분산하거나 프로그램의 코드를 수정해서 데드락을 최소화할 수 있지만 간단한 해결책이 아닙니다. 
이 경우 동일 데이터를 변경하거나 참조하는 프로그램끼리 분류해서 네임드 락을 걸고 쿼리를 실행하면 아주 간단히 해결할 수 있습니다. 


### 🧐 네임드 락의 사용처는 어떻게 되는거지..?


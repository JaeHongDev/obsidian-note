BEFORE_ON_PRIMARY_FAILOVER 일관성 수준은 싱글 프라이머리 모드로 설정된 그룹 복제에서 프라이머리 페일오버가 발생해서 신규 프라이머리가 선출됐을 때만 트랜잭션에 영향을 미친다.

![[Pasted image 20240430024046.png]]

## 특징
- 프라이머리에 페일오버가 발생했을 때 다른 멤버가 프라이머리로 변경되는 과정에서 이전 프라이머리의 트랜잭션이 모두 적용될 때 까지 처리되지 못하고 대기하게 됩니다. 
- 신규 프라이머리로 유입된 읽기 전용 및 쓰기 트랜잭션들은 최신 데이터를 바탕으로 동작 
- 신규 프라이머리로 유읻왼 읽기-쓰기 트랜잭션은 적용 대기 중인 이전 프라이머리의 트랜잭션과의 충돌로 롤백될 수 있지만 해당 일관성 수준을 사용하면 롤백이 발생하지 않는다.
- 새로 유입된 모든 읽기 쓰기 트랜잭션들은 처리가 지연되지만 모니터링 쿼리들은 지연되지 않는다. 

![[Pasted image 20240430183459.png]]
![[Pasted image 20240430183506.png]]

> [!NOTE] 정리
> 
BEFORE_ON_PRIMARY_FAILOVER 일관성 수준은 프라이머리 페일오버가 발생하지 않는 상황에서는 프라이머리로 유입된 트랜잭션들에 아무런 영향을 미치지 않는다. 즉, 일반적인 상황에서는 트랜잭션들이 EVENTUAL 일관성 수준으로 설정된 트랜잭션처럼 처리된다고 할 수 있다.

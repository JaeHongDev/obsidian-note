---
cssclasses:
  - my_style_width_100
---
MyISAM의 경우에는 별로 해당 사항이 없는 부분이지만 InnoDB는 다음과 같이 여러 가지 작업이 백그라운드로 처리된다.
- 인서트 버퍼(Insert Buffer)를 병합하는 스레드
- 로그를 디스크로 기록하는 스레드
- InnoDB 버퍼 풀의 데이터를 디스크에 기록하는 스레드
- 데이터를 버퍼로 읽어 오는 스레드
- 잠금이나 데드락을 모니터링하는 스레드

가장 중요한 것은 [[로그 스레드]]와 버퍼의 데이터를 디스크로 내려쓰는 작업을 처리하는 [[쓰기 스레드]]입니다.

MySQL5.5 버전부터 데이터 쓰기 스레드와 데이터 일기 스레드의 개수를 2개 이상 지정할 수 있게 됐으며, `innodb_write_io_threads` 와 `innodb_read_io_threads` 시스템 변수 스레드의 개수를 설정한다. 

[[InnoDB]] 에서도 데이터를 읽는 작업은 주로 클리언트 스레드에서 처리되기 때문에 일반적인 내장 디스크를 사용할 떄는 2~4개 정도, DAS나 SAN과 같은 스토리지를 사용할 때는 디스크를 최적으로 사용할 수 있을 만큼 충분히 설정하는 것이 좋습니다.

사용자의 요청을 처리하는 도중 데이터의 쓰기 작업은 지연되어 처리될 수 있지만 데이터의 읽기 작업은 절대 지연될 수 없습니다. 
그래서 일반적인 상용 DBMS에는 대부분 쓰기 작업을 버퍼링해서 일괄 처리하는 기능이 탑재돼 있으며, [[InnoDB]] 또한 이러한 방식으로 처리합니다.
-> 잠금없는 일관된 읽기와 버퍼와 관련된 내용일까?

백그라운드에서 처리되는 작업이라는 거네..?




### 의문점

#### DAS 혹은 SAN과 같은 스토리지를 사용할 때는 디스크를 최적으로 사용할 수 있을 만큼 충분히 설정하는 것이 좋은 이유는 뭘까요?

